{% extends "masters/base.html" %}
{% load static %}
{% block content %}

<!-- Redesigned Staff Sale Open (matches provided screenshot) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<div class="container-fluid mt-0">
  <!-- Top row: avatar + staff select + Individual Entry + (spacer) phone icon -->
  <div class="d-flex align-items-center bg-white p-2 rounded shadow-sm">
    <div class="d-flex align-items-center gap-3 flex-grow-1">
      <img src="https://cdn-icons-png.flaticon.com/512/194/194938.png" width="44" class="rounded" alt="avatar">
      <select class="form-select w-50" aria-label="Select staff">
        <option selected>!--SELECT STAFF--!</option>
        <option>staff 1</option>
        <option>staff 2</option>
        <option>staff 3</option>
      </select>

    </div>

    
  </div>

  <!-- Main content: left wide form + right slim panel -->
  <div class="row mt-3">

    <!-- left wide form (main inputs & added details) -->
    <div class="col-xl-9">
      <div class="card shadow-sm p-3">

        <!-- top inputs row -->
        <div class="row g-3 align-items-end">
          <div class="col-md-3">
            <label class="form-label small text-muted">Date</label>
            <input id="displayDate" type="text" class="form-control bg-light" readonly>
          </div>

          <div class="col-md-3">
            <label class="form-label small text-muted">Time</label>
            <div class="input-group">
              <input id="displayTime" type="text" class="form-control bg-light" readonly>
              <span class="input-group-text bg-white"><i class="bi bi-clock"></i></span>
            </div>
          </div>

          <div class="col-md-3">
            <label class="form-label small text-muted">Select Credit Customer</label>
            <select class="form-select bg-white">
              <option selected>!--SELECT Customer--!</option>
            </select>
          </div>

          <div class="col-md-3">
            <label class="form-label small text-muted">Select Vehicle</label>
            <select class="form-select bg-white">
              <option selected>!--Select Vehicle--!</option>
            </select>
          </div>

          <div class="col-md-2 d-none d-md-block"></div>
        </div>

        <!-- second row (Type / Product / Remarks) -->
        <div class="row g-3 mt-2">
          <div class="col-md-3">
            <label class="form-label small text-muted">Type</label>
            <select class="form-select bg-white">
              <option selected>!--SELECT TYPES--!</option>
            </select>
          </div>

          <div class="col-md-3">
            <label class="form-label small text-muted">Product Name</label>
            <select class="form-select bg-white">
              <option selected>!--SELECT PRODUCT NAME--!</option>
            </select>
          </div>

          <div class="col-md-6">
            <label class="form-label small text-muted">Remarks</label>
            <textarea class="form-control" rows="2" placeholder="Remarks"></textarea>
          </div>
        </div>

        <!-- Added Details table -->
        <div class="mt-4">
          <div class="table-responsive">
            <table class="table table-borderless align-middle small">
              <thead>
                <tr class="text-uppercase text-muted" style="font-size:12px;">
                  <th>Remove</th>
                  <th>Product</th>
                  <th>Tank</th>
                  <th>Rate / MRP</th>
                  <th>Qty</th>
                  <th>Total Amount</th>
                  <th>Dis Type</th>
                  <th>Dis Value</th>
                  <th>O.C Type</th>
                  <th>O.C Value</th>
                  <th>Book No</th>
                  <th>Leaf No</th>
                  <th>Tax Type</th>
                  <th>Tax %</th>
                  <th>CGST</th>
                  <th>SGST</th>
                  <th>IGST</th>
                  <th>Ref. No</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="18" class="text-muted py-4">No items added yet.</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- bottom tax boxes & total -->
          <div class="row g-3 mt-3 align-items-center">
            <div class="col-md-2">
              <label class="form-label small text-muted">CGST</label>
              <input type="text" readonly class="form-control bg-light text-end" value="0">
            </div>
            <div class="col-md-2">
              <label class="form-label small text-muted">SGST</label>
              <input type="text" readonly class="form-control bg-light text-end" value="0">
            </div>
            <div class="col-md-2">
              <label class="form-label small text-muted">IGST</label>
              <input type="text" readonly class="form-control bg-light text-end" value="0">
            </div>

            <div class="col-md-3 offset-md-1">
              <label class="form-label small text-muted">Total Amount</label>
              <input id="totalAmount" type="text" class="form-control bg-light" readonly>
            </div>
          </div>

          <!-- print checkbox and Save button -->
          <div class="d-flex align-items-center gap-3 mt-3">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="printCheck" checked>
              <label class="form-check-label fw-bold text-success" for="printCheck">Do you want print?</label>
            </div>

            <div class="ms-auto">
              <button class="btn btn-warning btn-wave">Save</button>
              <button type="reset" class="btn btn-danger-light">Cancel</button>
            </div>
          </div>

        </div>

      </div>
    </div>

    <!-- right slim panel (credit limit / outstanding / mode of pay / book/leaf/show) -->
    <div class="col-xl-3">
      <div class="card shadow-sm p-3">
        <div class="mb-3">
          <label class="form-label small text-muted">Credit Limit</label>
          <input type="text" class="form-control bg-light" readonly>
        </div>

        <div class="mb-3">
          <label class="form-label small text-muted">Outstanding Amount</label>
          <input type="text" class="form-control bg-light" readonly>
        </div>

        <div class="mb-3">
          <label class="form-label small text-muted">Mode of Pay</label>
          <select class="form-select">
            <option selected>Cash</option>
            <option>Card</option>
            <option>Online</option>
          </select>
        </div>

        <div class="row g-2 align-items-end">
          <div class="col-6">
            <label class="form-label small text-muted">Book No</label>
            <input type="text" class="form-control">
          </div>
          <div class="col-6">
            <label class="form-label small text-muted">Leaf No</label>
            <input type="text" class="form-control">
          </div>
          <div class="col-12 d-grid mt-2">
            <button class="btn btn-primary">Show</button>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>

<style>
  .card { border-radius: 6px; }
  .bg-light { background-color: #f2f3f4 !important; }
  .table thead th { border-bottom: 1px solid #eee; }
  .table tbody td { border-top: none; }
  .form-control[readonly] { cursor: default; }
  @media (max-width: 1199px){
    .col-xl-9, .col-xl-3{ flex: 0 0 100%; max-width:100%; }
  }
</style>

<!-- Auto-date/time script (dd/mm/yyyy and 12-hour time with AM/PM) -->
<script>
  function format12Hour(h, m) {
    const period = h >= 12 ? 'PM' : 'AM';
    h = h % 12;
    h = h ? h : 12; // 0 -> 12
    return String(h).padStart(2, '0') + ':' + String(m).padStart(2, '0') + ' ' + period;
  }

  document.addEventListener('DOMContentLoaded', function () {
    const now = new Date();
    const dd = String(now.getDate()).padStart(2, '0');
    const mm = String(now.getMonth() + 1).padStart(2, '0');
    const yyyy = now.getFullYear();
    const h = now.getHours();
    const min = String(now.getMinutes()).padStart(2, '0');

    document.getElementById('displayDate').value = dd + '/' + mm + '/' + yyyy;
    document.getElementById('displayTime').value = format12Hour(h, min);
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}
